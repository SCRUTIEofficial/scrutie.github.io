(function(jQuery){"use strict";jQuery.fn.mfnMenu=function(options){var menu=jQuery(this);var defaults={addLast:false,arrows:false,delay:100,hoverClass:'hover',mobileInit:768,responsive:true};options=jQuery.extend(defaults,options);var init=function(){jQuery('li:has(ul)',menu).addClass('submenu');jQuery('li:has(ul)',menu).append('<span class="menu-toggle"></span>');menu.children('li:has( ul.mfn-megamenu )').addClass('mfn-megamenu-parent');jQuery('.submenu ul li:last-child',menu).addClass('last-item');if(options.addLast){jQuery('> li:last-child',menu).addClass('last').prev().addClass('last');}
if(options.arrows){jQuery('li ul li:has(ul) > a',menu).append('<i class="menu-arrow icon-right-open"></i>');}};var doMenu=function(){if((window.innerWidth>=options.mobileInit)||(!options.responsive)){jQuery('> li, ul:not(.mfn-megamenu) li',menu).hover(function(){jQuery(this).stop(true,true).addClass(options.hoverClass);jQuery(this).children('ul').stop(true,true).fadeIn(options.delay);},function(){jQuery(this).stop(true,true).removeClass(options.hoverClass);jQuery(this).children('ul').stop(true,true).fadeOut(options.delay);});}else{jQuery('li',menu).unbind('hover');jQuery('li > .menu-toggle',menu).off('click').on('click',function(){var el=jQuery(this).closest('li');if(el.hasClass(options.hoverClass)){el.removeClass(options.hoverClass).children('ul').stop(true,true).fadeOut(options.delay);}else{el.addClass(options.hoverClass).children('ul').stop(true,true).fadeIn(options.delay);}});}};jQuery(window).bind('resize',doMenu);var __constructor=function(){init();doMenu();};__constructor();};})(jQuery);
